(()=>{var e={};e.id=602,e.ids=[602],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},85858:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>u}),r(18016),r(11506),r(35866);var a=r(23191),s=r(88716),o=r(37922),n=r.n(o),i=r(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let u=["",{children:["docente",{children:["encuesta",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,18016)),"C:\\DISCOD\\PROYECTOS\\SYSACAD_UI\\sysacad_ui\\app\\docente\\encuesta\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\DISCOD\\PROYECTOS\\SYSACAD_UI\\sysacad_ui\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\DISCOD\\PROYECTOS\\SYSACAD_UI\\sysacad_ui\\app\\docente\\encuesta\\page.tsx"],d="/docente/encuesta/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/docente/encuesta/page",pathname:"/docente/encuesta",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},45620:(e,t,r)=>{Promise.resolve().then(r.bind(r,97288)),Promise.resolve().then(r.bind(r,40501))},52396:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(10326);r(17577);let s=({column:e})=>{let{filterValue:t,setFilter:r}=e;return a.jsx("div",{className:"w-full mt-2.5  ",children:a.jsx("input",{type:"text",value:t||"",onChange:e=>r(e.target.value),onClick:e=>e.stopPropagation(),className:"w-full px-3 py-1 border border-stroke focus:border-primary outline-none rounded-md "})})}},97288:(e,t,r)=>{"use strict";r.d(t,{default:()=>h});var a=r(10326),s=r(17577),o=r(31205),n=r(52396),i=r(35047),l=r(94464),u=r(57975),c=r(69325);let d=async(e,t,r,a,s,o,n,i)=>{let d=(0,c.B)();try{return(await l.Z.post(`${u.Q}/api/v1/legacy304`,{tipo:e,legajo:t,encuesta:r,especialidad:a,plan:s,materia:o,comision:n,facultad:i},{headers:{Authorization:`${d}`}})).data.registros}catch(e){throw Error(e.response.data.statussalida)}},p=async e=>{try{return(await l.Z.post(`${u.Q}/api/v1/legacy305`,{vector:e},{headers:{Authorization:`${(0,c.B)()}`}})).data}catch(e){throw console.error("Error al enviar la encuesta:",e),e}};var m=r(79040),x=r(18341);let g=[{Header:"Pregunta",accessor:"pregunta"},{Header:"Respuesta",accessor:"respuesta"},{Header:"Observaci\xf3n",accessor:"observacion"}],h=()=>{let{user:e}=(0,x.a)(),[t,r]=(0,s.useState)([]),[l,u]=(0,s.useState)(!1),[c,h]=(0,s.useState)(!1),b=(0,i.useSearchParams)(),v=Number(b.get("encuesta")),f=Number(b.get("especialidad")),y=Number(b.get("plan")),j=Number(b.get("materia")),S=Number(b.get("comision")),P=e?.currentUser.role==="Docente"?2:1,[C,N]=(0,s.useState)({}),[A,_]=(0,s.useState)(!1),E=(0,i.useRouter)(),w=(0,s.useMemo)(()=>g,[]),k=(0,s.useMemo)(()=>Array.isArray(t)?t:[],[t]),q=(0,s.useMemo)(()=>({Filter:n.Z}),[]),{getTableProps:D,getTableBodyProps:O,headerGroups:U,page:Y,prepareRow:I}=(0,o.useTable)({data:k,columns:w,defaultColumn:q},o.useFilters,o.useGlobalFilter,o.useSortBy,o.usePagination),T=async e=>{u(!0),r(await d(P,e.currentUser.legajo,v,f,y,j,S,e.currentUser.facultad)||[]),u(!1)};if((0,s.useMemo)(()=>t.map(e=>{if("S"===e.titulo&&e.valores){let t=e.valores.split(";").filter(e=>""!==e.trim());return{...e,valoresArray:t}}return e}),[t]),(0,s.useEffect)(()=>{l||!e||c||(T(e),h(!0))},[e,l,c]),l)return a.jsx(m.Z,{mensaje:"Cargando informaci\xf3n"});let R=async r=>{if(r.preventDefault(),A)return;_(!0);let a={};if(t.forEach((e,t)=>{"S"!=e.obligatoria||e.respuesta||(a[t]="Este campo es obligatorio")}),Object.keys(a).length>0){N(a),alert("Por favor, completa todos los campos obligatorios antes de enviar."),_(!1);return}N({});let s=t.filter(e=>"S"!==e.titulo).map((t,r)=>({encuesta:v,tipo:P,legajo:e.currentUser.legajo,especialidad:e.currentUser.especialidad,plan:y,materia:j,comision:S,orden:t.orden,respuesta:t.respuesta||"",observacion:t.comentario||""}));try{await p(s),alert("Encuesta enviada correctamente."),E.push("/estudiante/encuesta-enviada")}catch(e){alert("Error al enviar la encuesta.")}finally{_(!1)}};return a.jsx("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:a.jsx("div",{className:"max-w-full overflow-x-auto",children:(0,a.jsxs)("form",{onSubmit:R,children:[(0,a.jsxs)("table",{className:"w-full table-auto",...D(),children:[a.jsx("thead",{children:U.map((e,t)=>(0,s.createElement)("tr",{...e.getHeaderGroupProps(),key:`headerGroup-${t}`},e.headers.map((e,t)=>(0,s.createElement)("th",{...e.getHeaderProps(e.getSortByToggleProps()),key:`column-${t}`,className:"py-4 px-4 font-medium text-black dark:text-white"},e.render("Header")))))}),a.jsx("tbody",{...O(),children:t.map((e,s)=>{e.valorinicial;let o=e.valores?e.valores.split(";").filter(e=>""!==e.trim()):[];return a.jsx("tr",{children:"S"===e.titulo?a.jsx(a.Fragment,{children:a.jsx("td",{className:"border px-4 py-2 text-center font-bold",colSpan:3,children:e.pregunta})}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("td",{className:"border px-4 py-2",children:e.pregunta}),o.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("td",{className:"border px-4 py-2",children:(0,a.jsxs)("select",{className:`w-full border px-2 py-1 rounded ${C[s]?"border-red-500":""}`,value:e.respuesta||"",onChange:e=>{let a=[...t];a[s].respuesta=e.target.value,r(a),N(e=>({...e,[s]:""}))},children:[a.jsx("option",{value:"",children:"Selecciona una opci\xf3n"}),o.map((e,t)=>a.jsx("option",{value:e,children:e},t))]})}),a.jsx("td",{className:"border px-4 py-2",children:a.jsx("input",{type:"text",className:"w-full border px-2 py-1 rounded",placeholder:"Escribe un comentario",value:e.comentario||"",onChange:e=>{let a=[...t];a[s].comentario=e.target.value,r(a)}})})]}):a.jsx("td",{className:"border px-4 py-2",colSpan:2,children:a.jsx("input",{type:"text",className:"w-full border px-2 py-1 rounded",placeholder:"",value:e.respuesta||"",onChange:e=>{let a=[...t];a[s].respuesta=e.target.value,r(a)}})})]})},s)})})]}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsx("button",{type:"submit",className:"text-white bg-black hover:bg-primary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:a.jsx("span",{className:"text-xs px-2",children:"ENVIAR"})})})]})})})}},18016:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,dynamic:()=>o,revalidate:()=>n});var a=r(19510),s=r(9364);let o="force-dynamic",n=0;function i(){return a.jsx(s.default,{})}},9364:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>i});var a=r(19510),s=r(92843);let o=(0,r(68570).createProxy)(String.raw`C:\DISCOD\PROYECTOS\SYSACAD_UI\sysacad_ui\components\Tables\encuestaEstudiante.tsx#default`);var n=r(96266);let i={title:"SYSACAD | Encuestas",description:"Sistema de Autogesti\xf3n Acad\xe9mica | SYSACAD | UTN",icons:{icon:"/images/utn.ico"}},l=()=>a.jsx(a.Fragment,{children:(0,a.jsxs)(n.Z,{children:[a.jsx(s.Z,{pageSection:"Encuesta -- ",pageName:"Detalle"}),a.jsx("div",{className:"flex flex-col gap-10",children:a.jsx(o,{})})]})})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,326,162,853,753,868,152,11],()=>r(85858));module.exports=a})();
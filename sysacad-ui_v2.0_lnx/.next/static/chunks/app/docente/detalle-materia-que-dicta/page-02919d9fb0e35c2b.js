(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9870],{5446:function(e,a,r){Promise.resolve().then(r.bind(r,9790)),Promise.resolve().then(r.bind(r,8001))},9890:function(e,a,r){"use strict";r.d(a,{B:function(){return t}});let t=()=>window.RUNTIME_CONFIG||{}},7156:function(e,a,r){"use strict";r.d(a,{OD:function(){return i},rQ:function(){return l},s$:function(){return s}});var t=r(3464),o=r(3330),n=r(5740);let s=async e=>{let a=(0,n.B)();try{return(await t.Z.post("".concat(o.Q,"/api/v1/legacy600"),{legajo:e},{headers:{Authorization:"".concat(a)}})).data.registros}catch(e){throw Error(e.response.data.statussalida)}},i=async e=>{let a=(0,n.B)();try{return(await t.Z.post("".concat(o.Q,"/api/v1/legacy102"),e,{headers:{Authorization:"".concat(a)}})).data}catch(e){throw Error(e.response.data.statussalida)}},l=async e=>{let a=(0,n.B)();try{return(await t.Z.post("".concat(o.Q,"/api/v1/legacy106"),e,{headers:{Authorization:"".concat(a)}})).data}catch(e){throw Error(e.response.data.statussalida)}}},7176:function(e,a,r){"use strict";var t=r(7437);r(2265),a.Z=e=>{let{column:a}=e,{filterValue:r,setFilter:o}=a;return(0,t.jsx)("div",{className:"w-full mt-2.5  ",children:(0,t.jsx)("input",{type:"text",value:r||"",onChange:e=>o(e.target.value),onClick:e=>e.stopPropagation(),className:"w-full px-3 py-1 border border-stroke focus:border-primary outline-none rounded-md "})})}},9790:function(e,a,r){"use strict";var t=r(7437),o=r(2265),n=r(3708),s=r(7176),i=r(7156),l=r(9317),d=r(3014),c=r(9376),u=r(9890);let b=[{Header:"Legajo",accessor:"estudianteLegajo"},{Header:"Estudiante",accessor:"estudiante"}],m=[{Header:"Legajo",accessor:"estudianteLegajo"},{Header:"Estudiante",accessor:"estudiante"},{Header:"P1",accessor:"P1"},{Header:"P2",accessor:"P2"},{Header:"P3",accessor:"P3"},{Header:"P4",accessor:"P4"},{Header:"P5",accessor:"P5"},{Header:"P6",accessor:"P6"},{Header:"R1",accessor:"R1"},{Header:"R2",accessor:"R2"},{Header:"R3",accessor:"R3"},{Header:"R4",accessor:"R4"},{Header:"R5",accessor:"R5"},{Header:"R6",accessor:"R6"},{Header:"Final",accessor:"final"},{Header:"Cond.",accessor:"estadoacademico"}];a.default=()=>{var e;let{user:a}=(0,d.a)(),r=(0,c.useSearchParams)(),[p,x]=(0,o.useState)([]),[g,f]=(0,o.useState)(!1),[h,v]=(0,o.useState)(!1),[k,j]=(0,o.useState)([]),[y,N]=(0,o.useState)(""),[w,H]=(0,o.useState)({indices:[],verificada:""}),[P,C]=(0,o.useState)(null),R=Number(r.get("plan")),A=Number(r.get("materia")),E=Number(r.get("anoacademico")),T=r.get("materiaNombre"),S=Number(r.get("comision")),O=Number(r.get("especialidad")),_=e=>{let a=Object.keys(e).filter(a=>a.includes("abrev")&&e[a]).map(a=>{let r=a.split("abrev")[1];return{columna:e[a],indexTo:"nota".concat(r),ref:e["nota".concat(r)]}});return a.push({columna:"Nota Final",indexTo:"notafinal",ref:"notafinal"},{columna:"Regularidad",indexTo:"estadoacademico",ref:"estadoacademico"},{columna:"Asistencia",indexTo:"estadoasistencia",ref:"estadoasistencia"}),{indices:a,verificada:e.verificada}},B=(e,a)=>{let{indices:r}=_(a),t=r.map(e=>e.indexTo);return e.forEach(e=>{Object.keys(e).forEach(a=>{a.includes("nota")&&!t.includes(a)&&delete e[a]})}),e},L=async e=>{f(!0);let a=await (0,i.OD)({legajo:e.currentUser.legajo,especialidad:O,plan:R,materia:A,anoacademico:E,comision:S});x(B(a.registros,a.parametro3[0])||[]),H(_(a.parametro3[0])),N(a.parametro3[0].checksum),f(!1)};(0,o.useEffect)(()=>{g||!a||h||(L(a),v(!0))},[a,g,h,L]);let F=(0,o.useMemo)(()=>({Filter:s.Z}),[]),G=e=>{var a;return[...b,...(null==e?void 0:null===(a=e.indices)||void 0===a?void 0:a.map(e=>({Header:e.columna,accessor:e.columna})))||[]]},Z=(0,o.useMemo)(()=>Array.isArray(p)?p:[],[p]),Q=(0,o.useMemo)(()=>Array.isArray(w.indices)?G(w):m,[w]),{getTableProps:D,getTableBodyProps:M,headerGroups:z,page:U,prepareRow:V}=(0,n.useTable)({data:Z,columns:Q,defaultColumn:F},n.useFilters,n.useGlobalFilter,n.useSortBy,n.usePagination),I=e=>{P?C({editable:!(null==P?void 0:P.editable),...e}):C({editable:!0,...e})},$=(e,r,t)=>{let o;let n=[...k],s=n.map(e=>null==e?void 0:e.legajoAlumno).indexOf(null==e?void 0:e.legajo);-1!==s&&n.splice(s,1),o="estadoacademico"===t?52:"notafinal"===t?51:Number(t.split("nota")[1]),r&&n.push({legajoAlumno:null==e?void 0:e.legajo,nota:Number(r),legajo:a.currentUser.legajo,especialidad:O,plan:R,materia:A,anoacademico:E,comision:S,tiponota:o}),j(n)},q=e=>{let{NEXT_PUBLIC_EDICION_LIBRES_ABANDONOS:a}=(0,u.B)();return console.log("Valor edicion_libres: ",a),!0===a||"Libre"!==e&&"Abandon\xf3"!==e},J=(e,a)=>{if(!q(a.estadoasistencia)||e!==(null==P?void 0:P.indexTo)||null==P||!P.editable)return a[e];{let r=r=>$(a,r.target.value,e),o=a[e]||0;return"estadoacademico"===e?X(r,o):(0,t.jsx)("input",{onChange:r,max:"10",type:"number",className:"w-16 rounded-lg border-[1.5px] border-primary bg-transparent px-2 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-white dark:bg-form-input dark:text-white",defaultValue:o})}},K=()=>{C(null),j([])},W=async()=>{await (0,i.rQ)({vector:k}),K(),await L(a)};if(g)return(0,t.jsx)(l.Z,{mensaje:"Cargando informaci\xf3n"});let X=(e,a)=>(0,t.jsxs)("select",{onChange:e,defaultValue:{"":0,Abandono:-1,"No curso":-2,Libre:1,Regular:2,Promocionado:3,"Ap. Directa":4}[a],children:[(0,t.jsx)("option",{value:"0"}),(0,t.jsx)("option",{value:"-1",children:"Abandono"}),(0,t.jsx)("option",{value:"-2",children:"No curso"}),(0,t.jsx)("option",{value:"1",children:"Libre"}),(0,t.jsx)("option",{value:"2",children:"Regular"}),(0,t.jsx)("option",{value:"3",children:"Promocionado"}),(0,t.jsx)("option",{value:"4",children:"Ap. Directa"})]});return(0,t.jsxs)("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[(0,t.jsxs)("div",{className:"my-6",children:[(0,t.jsxs)("p",{children:["Estudiantes cursando: ",T]}),(0,t.jsxs)("p",{children:["Comision ",S," en a\xf1o ",E]})]}),(0,t.jsx)("div",{className:"my-6",children:null==w?void 0:null===(e=w.indices)||void 0===e?void 0:e.map((e,a)=>("notafinal"===e.indexTo||"estadoacademico"===e.indexTo)&&"N"!==w.verificada||"estadoasistencia"===e.indexTo?null:(0,t.jsx)("button",{onClick:()=>I(e),className:"text-white bg-black hover:bg-primary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:e.columna},"".concat(e.columna,"-").concat(a)))}),y&&(0,t.jsxs)("div",{className:"flex justify-start my-6",children:["C\xf3digo de validaci\xf3n: ",y]}),(null==P?void 0:P.editable)&&(0,t.jsxs)("div",{className:"flex justify-end my-6",children:[(0,t.jsx)("button",{onClick:()=>W(),disabled:!(null==P?void 0:P.editable),className:"text-white bg-black hover:bg-primary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Guardar cambios"}),(0,t.jsx)("button",{onClick:()=>K(),disabled:!(null==P?void 0:P.editable),className:"text-white bg-black hover:bg-primary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Cancelar"})]}),(0,t.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full table-auto",...D(),children:[(0,t.jsx)("thead",{children:z.map((e,a)=>(0,o.createElement)("tr",{...e.getHeaderGroupProps(),key:"headerGroup-".concat(a)},e.headers.map(e=>(0,o.createElement)("th",{...e.getHeaderProps(e.getSortByToggleProps()),key:"column-".concat(e.id),className:"py-4 px-4 font-medium text-black dark:text-white"},e.render("Header")))))}),(0,t.jsx)("tbody",{...M(),children:p.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e.legajo}),(0,t.jsx)("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e.nombre}),Object.keys(e).filter(e=>e.includes("nota")||e.includes("estadoacademico")).map(a=>(0,t.jsx)("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:J(a,e)},a)),(0,t.jsx)("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e.estadoasistencia})]},a))})]})}),(null==P?void 0:P.editable)&&(0,t.jsxs)("div",{className:"flex justify-end my-6",children:[(0,t.jsx)("button",{onClick:()=>W(),disabled:!(null==P?void 0:P.editable),className:"text-white bg-black hover:bg-primary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Guardar cambios"}),(0,t.jsx)("button",{onClick:()=>K(),disabled:!(null==P?void 0:P.editable),className:"text-white bg-black hover:bg-primary focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Cancelar"})]})]})}}},function(e){e.O(0,[3587,9070,4609,5947,8316,798,5640,1320,8001,2971,2117,1744],function(){return e(e.s=5446)}),_N_E=e.O()}]);